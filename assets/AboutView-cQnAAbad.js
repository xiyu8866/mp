import{x as e,i as t,d as o,I as a,_ as l}from"./index-oLhXkg5y.js";const n="GuaGUAShiXIuwenbaoBAo099";const u={class:"section"},c={class:"section"},s={class:"section"},r={key:0,class:"loading"},i={key:1,class:"wechat"},d=(e=>(Vue.pushScopeId("data-v-d1751805"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("div",{class:"tips"},[Vue.createTextVNode("提示：微信浏览器无法下载文件，需要加密文件的可以复制内容后点击右上角 "),Vue.createElementVNode("span",{style:{"font-size":"18px","font-weight":"bold"}},"···"),Vue.createTextVNode(" 选择 “在浏览器打开” 后在工具项点击 生成txt文件。")],-1))),V={class:"btn-box",style:{padding:"10px 16px 16px","margin-top":"20px"}},p="XiGuaAiHaoXiuWen",v="西瓜刺客的存储器",h=l(Vue.defineComponent({__name:"AboutView",setup(l){const h=new a("userinfo"),m=Vue.ref(!1),f=Vue.ref(!1),C=Vue.ref(""),w=t(),x=Vue.ref(null),y=async()=>{const e=(await h.getAllData()).map((e=>(delete e.id,e)));if(!e.length)return void vant.showFailToast("没有数据");let t=function(e,t,o){const a=CryptoJS.enc.Utf8.parse(n),l=CryptoJS.enc.Utf8.parse(o);return CryptoJS.AES.encrypt(e+t,a,{iv:l,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString()}(JSON.stringify(e),v,p);w?(m.value=!0,C.value=t):(o(t,`${v}.txt`),setTimeout((()=>{t=null}),100))},N=e=>{const t=e.target,o=t.files;if(o&&o.length){const e=o[0],t=new FileReader;t.onload=async()=>{let e=function(e,t,o){const a=CryptoJS.enc.Utf8.parse(t),l=CryptoJS.enc.Utf8.parse(o);return CryptoJS.AES.decrypt(e,a,{iv:l,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)}(t.result,n,p);if(-1!==e.indexOf(v)){e=e.replace(v,"");try{const t=JSON.parse(e);await h.addListData(t),vant.showSuccessToast("导入成功")}catch(o){vant.showFailToast("文件格式错误")}}else vant.showFailToast("文件格式错误")},t.readAsText(e)}t.value=""},S=()=>{vant.showDialog({title:"警告",message:"确认要删除所有数据吗？删了可就没了哦！",showCancelButton:!0,overlayClass:"dialog-lay"}).then((()=>{h.deleteAll().then((()=>{vant.showSuccessToast("删除成功")})).catch(console.error)}))},g=e=>{e.txt?(o(e.txt,`${v}.txt`),setTimeout((()=>{C.value=""}),100)):vant.showFailToast("请输入文件内容")},k=()=>{var e;null==(e=x.value)||e.popupShow()};return(t,o)=>{const a=Vue.resolveComponent("van-nav-bar"),l=Vue.resolveComponent("van-cell"),n=Vue.resolveComponent("van-cell-group"),p=Vue.resolveComponent("van-text-ellipsis"),v=Vue.resolveComponent("van-button"),h=Vue.resolveComponent("van-popup"),b=Vue.resolveComponent("van-field"),_=Vue.resolveComponent("van-form"),J=Vue.resolveComponent("van-dialog"),T=Vue.resolveDirective("clipboard");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createVNode(a,{title:"设置",fixed:"",placeholder:""}),Vue.createElementVNode("div",u,[Vue.createVNode(n,{title:"备份与恢复"},{default:Vue.withCtx((()=>[Vue.createVNode(l,{title:"创建备份文件",icon:"exchange",onClick:y}),Vue.createVNode(l,{title:"恢复备份文件",icon:"upgrade"},{default:Vue.withCtx((()=>[Vue.createElementVNode("input",{class:"file",type:"file",accept:".txt",onChange:N},null,32)])),_:1})])),_:1})]),Vue.createElementVNode("div",c,[Vue.createVNode(n,{title:"数据"},{default:Vue.withCtx((()=>[Vue.createVNode(l,{title:"删除所有数据",icon:"delete-o",onClick:S})])),_:1})]),Vue.createElementVNode("div",s,[Vue.createVNode(n,{title:"工具"},{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createVNode(l,{title:"生成txt文件",icon:"font-o",onClick:o[0]||(o[0]=e=>f.value=!0)},null,512),[[Vue.vShow,!Vue.unref(w)]]),Vue.createVNode(l,{title:"密码生成器",icon:"orders-o",onClick:k})])),_:1})]),Vue.createVNode(h,{show:m.value,"onUpdate:show":o[1]||(o[1]=e=>m.value=e),position:"bottom",round:"",style:{height:"35vh"},onClosed:o[2]||(o[2]=e=>C.value="")},{default:Vue.withCtx((()=>[C.value?(Vue.openBlock(),Vue.createElementBlock("div",i,[d,Vue.createVNode(p,{rows:"1",content:C.value},null,8,["content"]),Vue.withDirectives((Vue.openBlock(),Vue.createBlock(v,{type:"primary",block:""},{default:Vue.withCtx((()=>[Vue.createTextVNode("复制")])),_:1})),[[T,C.value,"copy"],[T,"复制成功","success"]])])):(Vue.openBlock(),Vue.createElementBlock("div",r,"正在生成文件..."))])),_:1},8,["show"]),Vue.createVNode(J,{show:f.value,"onUpdate:show":o[4]||(o[4]=e=>f.value=e),title:"生成文件","show-cancel-button":""},{default:Vue.withCtx((()=>[Vue.createVNode(_,{onSubmit:g},{default:Vue.withCtx((()=>[Vue.createVNode(b,{modelValue:C.value,"onUpdate:modelValue":o[3]||(o[3]=e=>C.value=e),label:"内容",type:"textarea",name:"txt",placeholder:"请输入内容"},null,8,["modelValue"]),Vue.createElementVNode("div",V,[Vue.createVNode(v,{block:"",type:"primary","native-type":"submit"},{default:Vue.withCtx((()=>[Vue.createTextVNode("生成")])),_:1})])])),_:1})])),_:1},8,["show"]),Vue.createVNode(e,{ref_key:"passRef",ref:x},null,512)],64)}}}),[["__scopeId","data-v-d1751805"]]);export{h as default};
